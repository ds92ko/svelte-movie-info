<script>
  const data = [
    { title: '파묘',
      year: 2024,
      category: '미스터리, 공포',
      likeCount: 0,
      imgUrl: '/images/파묘.jpg',
      story: '미국 LA, 거액의 의뢰를 받은 무당 ‘화림’(김고은)과 ‘봉길’(이도현)은 기이한 병이 대물림되는 집안의 장손을 만난다. 조상의 묫자리가 화근임을 알아챈 ‘화림’은 이장을 권하고, 돈 냄새를 맡은 최고의 풍수사 ‘상덕’(최민식)과 장의사 ‘영근’(유해진)이 합류한다. “전부 잘 알 거야… 묘 하나 잘못 건들면 어떻게 되는지” 절대 사람이 묻힐 수 없는 악지에 자리한 기이한 묘. ‘상덕’은 불길한 기운을 느끼고 제안을 거절하지만, ‘화림’의 설득으로 결국 파묘가 시작되고… 나와서는 안될 것이 나왔다.'
    },
    { title: '고질라 X 콩: 뉴 엠파이어',
      year: 2024,
      category: '어드벤처, 액션, SF',
      likeCount: 0,
      imgUrl: '/images/고질라x콩.jpg',
      story: '고질라 X 콩, 이번에는 한 팀이다! ‘고질라’ VS ‘콩’, 두 타이탄의 전설적인 대결 이후 할로우 어스에 남은 ‘콩’은 드디어 애타게 찾던 동족을 발견하지만 그 뒤에 도사리고 있는 예상치 못한 위협에 맞닥뜨린다. 한편, 깊은 동면에 빠진 ‘고질라’는 알 수 없는 신호로 인해 깨어나고 푸른 눈의 폭군 ‘스카 킹’의 지배 아래 위기에 처한 할로우 어스를 마주하게 된다. 할로우 어스는 물론, 지구상에도 출몰해 전세계를 초토화시키는 타이탄들의 도발 속에서 ‘고질라’와 ‘콩’은 사상 처음으로 한 팀을 이뤄 반격에 나서기로 하는데…'
    },
    { title: '듄: 파트2',
      year: 2024,
      category: '액션',
      likeCount: 0,
      imgUrl: '/images/듄-파트2.jpg',
      story: '황제의 모략으로 멸문한 가문의 유일한 후계자 폴.(티모시 샬라메) 어머니 레이디 제시카(레베카 퍼거슨)와 간신히 목숨만 부지한 채 사막으로 도망친다. 그곳에서 만난 반란군들과 숨어 지내다 그들과 함께 황제의 모든 것을 파괴할 전투를 준비한다. 한편 반란군들의 기세가 높아질수록 불안해진 황제와 귀족 가문은 잔혹한 암살자 페이드 로타(오스틴 버틀러)를 보내 반란군을 몰살하려 하는데… 운명의 반격이 시작된다!'
    },
  ]

  let isOpenModal = false;
  
  /**
   * @param {number} index
   */
  const handleLike = (index) => {
    data[index].likeCount += 1;
  }

  const handleOpenModal = () => {
    isOpenModal = true;
  }

  const handleCloseModal = () => {
    isOpenModal = false;
  } 
</script>

<main class="container">
  <h1>영화정보</h1>
  {#each data as { title, year, category, likeCount, imgUrl }, index}
    <div class="movie">
      <figure>
        <img src={imgUrl} alt={title} />
      </figure>
      <div class="info">
        <h3 class="bg-yellow">{title}</h3>
        <p>개봉: {year}</p>
        <p>장르: {category}</p>
        <button class="btn" on:click={() => handleLike(index)}>좋아요 {likeCount}</button>
        <button class="btn btn-primary" on:click={handleOpenModal}>상세보기</button>
      </div>
    </div>
  {/each}
</main>

{#if isOpenModal}
  <div class="modal">
    <div class="inner">
      <h3>영화 상세정보</h3>
      <button class="btn-close" on:click={handleCloseModal}>닫기</button>
    </div>
  </div>
{/if}

<style>
  .bg-yellow {
    background: yellow;
    padding: 10px;
    color: #333;
  }

  .movie {
    width: 100%;
    border: 1px solid #ccc;
    display: flex;
    margin-bottom: 20px;
    padding: 1rem;

    figure {
      width: 30%;
      margin-right: 1rem;
    }

    img {
      width: 100%;
    }

    .info {
      width: 100%;
    }
  }

  .modal {
    background: rgba(0, 0, 0, 0.7);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;

    .inner {
      background: #fff;
      width: 80%;
      padding: 20px;
      border-radius: 10px;
    }
  }
</style>
